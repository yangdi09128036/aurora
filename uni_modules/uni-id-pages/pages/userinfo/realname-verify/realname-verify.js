"use strict";const e=require("../../../../../common/vendor.js"),i=require("../../../common/login-page.mixin.js"),t=require("../../../common/store.js"),r=require("../../../../../common/assets.js");e.er.importObject("uni-id-co");const n={mixins:[i.mixin],data:()=>({realName:"",idCard:"",certifyId:"",verifyFail:!1,verifyFailCode:0,verifyFailTitle:"",verifyFailContent:""}),computed:{userInfo:()=>t.store.userInfo,certifyIdNext(){return Boolean(this.realName)&&Boolean(this.idCard)&&this.needAgreements&&this.agree},isCertify(){return this.userInfo.realNameAuth&&2===this.userInfo.realNameAuth.authStatus},isDev:()=>!1},onLoad(){const i=e.index.getStorageSync("uni-id-pages-temp-frv");i&&(this.realName=i.realName,this.idCard=i.idCard)},methods:{async getCertifyId(){if(this.certifyIdNext)return e.index.showModal({content:"暂不支持实名认证",showCancel:!1})},startFacialRecognitionVerify(){},async getFrvAuthResult(){const i=e.er.importObject("uni-id-co",{customUI:!0});try{e.index.showLoading({title:"验证中...",mask:!1});const r=await i.getFrvAuthResult({certifyId:this.certifyId}),{errCode:n,...s}=r;this.verifyFailContent&&console.log(`[frv-debug] 客户端刷脸失败，由实人认证服务查询具体原因，原因：${this.verifyFailContent}`),e.index.showModal({content:"实名认证成功",showCancel:!1,success:()=>{t.mutations.setUserInfo({realNameAuth:s}),this.verifyFail=!1}}),e.index.removeStorage({key:"uni-id-pages-temp-frv"})}catch(r){this.verifyFail=!0,this.verifyFailTitle=r.errMsg,console.error(JSON.stringify(r))}finally{e.index.hideLoading()}},retry(){10013!==this.verifyFailCode?this.getCertifyId():this.verifyFail=!1}}};if(!Array){(e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms")+e.resolveComponent("uni-id-pages-agreements"))()}Math||((()=>"../../../../uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../../../uni-list/components/uni-list/uni-list.js")+(()=>"../../../../uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../../../uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../../uni-forms/components/uni-forms/uni-forms.js")+(()=>"../../../components/uni-id-pages-agreements/uni-id-pages-agreements.js"))();const s=e._export_sfc(n,[["render",function(i,t,n,s,o,a){return e.e({a:a.isCertify},a.isCertify?{b:e.p({title:"姓名",rightText:a.userInfo.realNameAuth.realName}),c:e.p({title:"身份证号码",rightText:a.userInfo.realNameAuth.identity})}:e.e({d:o.verifyFail},o.verifyFail?e.e({e:r._imports_0$3,f:e.t(o.verifyFailTitle),g:e.t(o.verifyFailContent),h:10013!==o.verifyFailCode},10013!==o.verifyFailCode?{i:e.o(((...e)=>a.retry&&a.retry(...e)))}:{j:e.o(((...e)=>a.retry&&a.retry(...e)))},{k:a.isDev},(a.isDev,{})):{l:e.o((e=>o.realName=e)),m:e.p({placeholder:"姓名",clearable:!1,modelValue:o.realName}),n:e.p({name:"realName"}),o:e.o((e=>o.idCard=e)),p:e.p({placeholder:"身份证号码",clearable:!1,modelValue:o.idCard}),q:e.p({name:"idCard"}),r:e.sr("agreements","72337542-8"),s:e.p({scope:"realNameVerify"}),t:!a.certifyIdNext,v:e.o(((...e)=>a.getCertifyId&&a.getCertifyId(...e)))}))}]]);wx.createPage(s);
