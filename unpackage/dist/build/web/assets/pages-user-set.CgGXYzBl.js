import{s as e,n as s,z as a,E as l,b as o,r as t,c as n,w as i,i as d,o as r,d as u,e as m,g as c,j as f,I as p,a8 as h,h as b,a7 as _}from"./index-El_S5awX.js";import{_ as g}from"./uni-id-pages-avatar.2PJLG89u.js";import{r as I}from"./uni-app.es.DUfiIcRS.js";import{s as V}from"./store.D9vwEKqx.js";import{_ as j}from"./left.CpwphMH_.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.Bmz5z2vR.js";const v=k({data:()=>({username:"",mobile:"",address:""}),onLoad(){this.loadUserInfo()},methods:{loadUserInfo(){const e=V.userInfo;console.log("之前用户信息",e),e&&(this.username=e.username||"",this.mobile=e.mobile||"",this.address=e.address||"")},async saveUserInfo(){if(this.username&&this.mobile&&this.address)try{const l=s.database();await l.collection("uni-id-users").doc(V.userInfo._id).update({username:this.username,mobile:this.mobile,address:this.address}),V.userInfo={...V.userInfo,username:this.username,mobile:this.mobile,address:this.address},console.log("之后用户信息",V.userInfo),e({title:"保存成功",icon:"success"}),setTimeout((()=>{a()}),1500)}catch(l){console.error("保存用户信息失败:",l),e({title:"保存失败，请重试",icon:"none"})}else e({title:"请填写完整信息",icon:"none"})},handleBack(){a()},handleLogout(){l({title:"提示",content:"确定要退出登录吗？",success:e=>{e.confirm&&o({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})}})}}},[["render",function(e,s,a,l,o,V){const k=c,v=d,x=f,U=I(t("uni-id-pages-avatar"),g),w=p,y=h,C=b,L=_;return r(),n(v,{class:"container"},{default:i((()=>[u(v,{class:"nav-back",onClick:V.handleBack},{default:i((()=>[u(k,{src:j,mode:"",class:"back-icon"})])),_:1},8,["onClick"]),u(L,{onSubmit:V.saveUserInfo},{default:i((()=>[u(v,{class:"form-content"},{default:i((()=>[u(v,{class:"form-item"},{default:i((()=>[u(x,{class:"label"},{default:i((()=>[m("头像")])),_:1}),u(U,{width:"120rpx",height:"120rpx"})])),_:1}),u(v,{class:"form-item"},{default:i((()=>[u(x,{class:"label"},{default:i((()=>[m("用户名")])),_:1}),u(w,{class:"input",type:"text",modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=e=>o.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),u(v,{class:"form-item"},{default:i((()=>[u(x,{class:"label"},{default:i((()=>[m("手机号码")])),_:1}),u(w,{class:"input",type:"number",modelValue:o.mobile,"onUpdate:modelValue":s[1]||(s[1]=e=>o.mobile=e),placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),u(v,{class:"form-item"},{default:i((()=>[u(x,{class:"label"},{default:i((()=>[m("收货地址")])),_:1}),u(y,{class:"textarea",modelValue:o.address,"onUpdate:modelValue":s[2]||(s[2]=e=>o.address=e),placeholder:"请输入详细收货地址"},null,8,["modelValue"])])),_:1})])),_:1}),u(C,{"form-type":"submit",class:"save-btn"},{default:i((()=>[m("保存修改")])),_:1}),u(v,{class:"logout-btn",onClick:V.handleLogout},{default:i((()=>[m("退出登录")])),_:1},8,["onClick"])])),_:1},8,["onSubmit"])])),_:1})}],["__scopeId","data-v-3206af34"]]);export{v as default};
